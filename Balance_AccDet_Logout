//with main class, menu, money transaction, checking of balance, account details, and log out and balik to main class

package Final_Project;
import java.util.Scanner;
import java.util.ArrayList;
public class BankAccount {

	private String storedName;
    private int storedPin;
    private String storedUsername;
    private String storedPassword;
    private ArrayList<Double> transactionHistory = new ArrayList<>();
    
    public BankAccount() {
        signUp();
    }

    private void signUp() {
        Scanner scanner = new Scanner(System.in);

        System.out.println("\n \tCreate an Account!\n");
        System.out.print("\tEnter Account Name: ");
        storedName = scanner.nextLine();

        System.out.print("\tEnter PIN: ");
        storedPin = UserInput(scanner);
        scanner.nextLine();

        System.out.print("\tEnter Username: ");
        storedUsername = scanner.nextLine();

        System.out.print("\tEnter Password: ");
        storedPassword = scanner.nextLine();
    }

    private int UserInput(Scanner scanner) {
        int input = 0;

        while (true) {
            if (scanner.hasNextInt()) {
                input = scanner.nextInt();
                break;
            } else {
                System.out.print("\tInvalid PIN. Please enter a numeric value: ");
                scanner.next();
            }
        }
        return input;
    }

    private void Login(Scanner login){
        System.out.println("\n\tFederal Reserve Bank of COM23P!\n");

        System.out.print("Enter Username: ");
        String enteredUser = login.nextLine();
        System.out.print("Enter Password: ");
        String enteredPass = login.nextLine();

        if (enteredUser.equals(storedUsername) && enteredPass.equals(storedPassword)) {
            System.out.println("\n\tYou've successfully logged in!\n");
            Menu();
        } else {
            System.out.println("\n\tInvalid username or password. Please try again.\n");
            Login(login);
        }
    }

    private void Menu() {
        Scanner scanner = new Scanner(System.in);
        double balance = 0;
   
        	while (true) {
            System.out.println("\n\tAccount Menu:\n");
            System.out.println("\t[A] Money Transaction");
            System.out.println("\t[B] Balance");
            System.out.println("\t[C] Account Details");
            System.out.println("\t[D] Transacation History");
            System.out.println("\t[E] Log Out");
            System.out.print("\tEnter your choice: ");

            char choice = scanner.next().charAt(0);

             switch (choice) {
                case 'A':
                   System.out.println("\n\tMoney Transaction Menu: \n");
                   System.out.println("\t[A] Deposit");
                   System.out.println("\t[B] Withdraw");
                   System.out.print("\tEnter your choice: ");
                   char transactionChoice = scanner.next().charAt(0);

                    if (transactionChoice == 'A') {
                      System.out.print("\tEnter the amount to deposit: ");
                      double depositAmount = scanner.nextDouble();
                      balance += depositAmount;
                      transactionHistory.add(depositAmount);
                      System.out.println("\tDeposit successful.");
                      } else if (transactionChoice == 'B') {
                      System.out.print("\tEnter the amount to withdraw: ");
                      double withdrawAmount = scanner.nextDouble();
                      if (withdrawAmount <= balance) {
                      balance -= withdrawAmount;
                      transactionHistory.add(-withdrawAmount);
                         System.out.println("\tWithdrawal successful.");
                         } else {
                         System.out.println("\tInsufficient funds.");
                         }
                        } else {
                         System.out.println("\tInvalid choice.");
                        }
                        break;

                case 'B':
                    System.out.println("\tCurrent Balance: P " + balance);
                    break;

                case 'C':
                     System.out.println("\tAccount Details:");
                     displayAccountDetails();
                     break;

                case 'D':
                	displayTransactionHistory();
                	break;
                    
                case 'E':
                	System.out.println("\tYou have successfully logged out!");
                    return;

                default:
                     System.out.println("\tInvalid choice. Please enter A, B, C, D, or E: ");
                }
            }
        }
    
    public void displayAccountDetails() {
        System.out.println("\n\tAccount Details:\n");
        System.out.println("\tAccount Name: " + storedName);
        System.out.println("\tPIN: " + storedPin);
        System.out.println("\tUsername: " + storedUsername);
        System.out.println("\tPassword: " + storedPassword);
        System.out.println(" ");
        System.out.println("\tYou have successfully created an account!");
    
    }
    
    public void displayTransactionHistory() {
    	System.out.println("\n\tTransaction History:\n");
        for (double amount : transactionHistory) {
            if (amount > 0) {
                System.out.println("\tDeposit: " + amount);
            } else if (amount < 0){
                System.out.println("\tWithdrawal: " + (-amount));
            } else {
            	System.out.println("\tError");
            }
            
        }
        System.out.println("\n");
    }
    
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int option = 0;
        BankAccount userAccount = null;

        while (option != 4) {
            System.out.println("\n\tWelcome to Federal Reserve bank of COM23P!");
            System.out.println("\n1. Sign Up");
            System.out.println("2. Log In");
            System.out.println("3. Transaction History");
            System.out.println("4. Exit");
            System.out.print("Choose an option: ");
            option = scanner.nextInt();

            switch (option) {
                case 1:
                    System.out.println("Sign Up selected. ");
                    userAccount = new BankAccount();
                    userAccount.displayAccountDetails();
                    break;
                case 2:
                    System.out.println("Log In selected. ");
                    scanner.nextLine();
                    scanner.nextLine();
                    if (userAccount != null) {
                        userAccount.Login(scanner); 
                    } else {
                        System.out.println("No account created yet. Please sign up first.");
                    }
                    break;
                case 3:
                	if (userAccount != null) {
                        userAccount.displayTransactionHistory();
                    } else {
                        System.out.println("No account created yet. Please sign up first.");
                    }        
                	break;
                case 4:
                    System.out.println("Leaving the Banking System. Goodbye! ");
                    break;
                	
                default:
                    System.out.println("Invalid option. Please try again. ");
                    break;
            }
        }
    }
}
